<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Document</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body id="i9rrv">
        <div class="gjs-grid-row" id="i31da">
            <div class="gjs-grid-column" id="ij8cp">
              <div id="i1fy">content1</div>
              <div id="tracks-ipiy">mask1</div>
            </div>
        </div>

        <script src = "https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <script>
                //user name input
                var username = prompt("请输入您的ID：");

                // define database url
                var dta_url = "https://PolarHare.eu.pythonanywhere.com";

                // page log
                $.getJSON(
                  dta_url,
                  {username: username,
                  timeMark: Date.now(),
                  objname: window.location.pathname,
                  action: "landing",
                  x: 0,
                  y: 0 },function(data){console.log(data)})

                // mouse enter detection
                $('*[id^=tracks]:visible').each(function(){
                    $(this).mouseenter(function(event){
                        var obj = this.id
                        console.log(obj)
                        $.getJSON(
                          dta_url,
                          {username: username,
                          timeMark: Date.now(),
                          objname: this.id,
                          action: "mouseenter",
                          x: event.originalEvent.x,
                          y: event.originalEvent.x },function(data){console.log(data)})
                    });
                });

                // mouse leave detection
                $('*[id^=tracks]:visible').each(function(){
                    $(this).mouseleave(function(event){
                        $.getJSON(
                          dta_url,
                          {username: username,
                          timeMark: Date.now(),
                          objname: this.id,
                          action: "mouseleave",
                          x: event.originalEvent.x,
                          y: event.originalEvent.x })
                    });
                });

                // mouse up detection
                $('*[id^=tracks]:visible').each(function(){
                    $(this).mouseup(function(event){
                        var obj = this.id
                        console.log(obj)
                        $.getJSON(
                          dta_url ,
                          {username: username,
                          timeMark: Date.now(),
                          objname: this.id,
                          action: "mouseup",
                          x: event.originalEvent.x,
                          y: event.originalEvent.x })
                    });
                });

                // mouse down detection
                $('*[id^=tracks]:visible').each(function(){
                    console.log("define")
                    $(this).mousedown(function(event){
                        var obj = this.id
                        console.log(obj)
                        $.getJSON(
                          dta_url ,
                          {username: username,
                          timeMark: Date.now(),
                          objname: this.id,
                          action: "mousedown",
                          x: event.originalEvent.x,
                          y: event.originalEvent.x })
                    });
                });

        </script>
    </body>
</html>
